{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">            


    <!-- Questi 3 carousel solo gli stessi della home-->

  <!-- Sezione 1: Popolari -->
  <h2 class="text-white mt-5 mb-4">üî• Film Popolari</h2>
  <div id="popolariCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for gruppo in film_popolari %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <div class="row justify-content-center">
          {% for film in gruppo %}
          <div class="col-md-4">
            <div class="card bg-dark text-white mb-4 shadow rounded h-100">
              <a href="{% url 'film:film' film.pk %}">
                <img src="{% static 'genere/'|add:film.immagine_genere %}"
                     alt="{{ film.titolo }}"
                     class="card-img-top"
                     style="height: 250px; object-fit: cover;">
              </a>
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">
                  <a href="{% url 'film:film' film.pk %}" class="text-warning text-decoration-none">
                    {{ film.titolo }}
                  </a>
                </h5>
                <p class="text-muted">Rating: {{ film.media_rating|default:"-"|floatformat:1 }}</p>
                <p class="text-muted">Voti: {{ film.numero_rating }} | Commenti: {{ film.numero_commenti }}</p>
                <a href="{% url 'film:film' film.pk %}" class="btn btn-outline-warning mt-auto">Scopri di pi√π</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#popolariCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Precedente</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#popolariCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Successivo</span>
    </button>
  </div>

  <!-- Sezione 2: Rating -->
  <h2 class="text-white mt-5 mb-4">‚≠ê Miglior Voto Medio</h2>
  <div id="ratingCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for gruppo in film_rating_alto %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <div class="row justify-content-center">
          {% for film in gruppo %}
          <div class="col-md-4">
            <div class="card bg-dark text-white mb-4 shadow rounded h-100">
              <a href="{% url 'film:film' film.pk %}">
                <img src="{% static 'genere/'|add:film.immagine_genere %}"
                     alt="{{ film.titolo }}"
                     class="card-img-top"
                     style="height: 250px; object-fit: cover;">
              </a>
              <div class="card-body d-flex flex-column">
                <h5 class="card-title text-warning">{{ film.titolo }}</h5>
                <p class="text-muted">Voto Medio: {{ film.media_rating|default:"-"|floatformat:2 }}</p>
                <a href="{% url 'film:film' film.pk %}" class="btn btn-outline-warning mt-auto">Scopri di pi√π</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#ratingCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
      <span class="visually-hidden">Precedente</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#ratingCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
      <span class="visually-hidden">Successivo</span>
    </button>
  </div>

  <!-- Sezione 3: Pi√π commentati -->
  <h2 class="text-white mt-5 mb-4">üí¨ Pi√π Commentati</h2>
  <div id="commentiCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for gruppo in film_commentati %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <div class="row justify-content-center">
          {% for film in gruppo %}
          <div class="col-md-4">
            <div class="card bg-dark text-white mb-4 shadow rounded h-100">
              <a href="{% url 'film:film' film.pk %}">
                <img src="{% static 'genere/'|add:film.immagine_genere %}"
                     alt="{{ film.titolo }}"
                     class="card-img-top"
                     style="height: 250px; object-fit: cover;">
              </a>
              <div class="card-body d-flex flex-column">
                <h5 class="card-title text-warning">{{ film.titolo }}</h5>
                <p class="text-muted">Commenti: {{ film.numero_commenti }}</p>
                <a href="{% url 'film:film' film.pk %}" class="btn btn-outline-warning mt-auto">Scopri di pi√π</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#commentiCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
      <span class="visually-hidden">Precedente</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#commentiCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
      <span class="visually-hidden">Successivo</span>
    </button>
  </div>

</div>
{% endblock %}
